---
title: "[Network] 3. 프로토콜(Protocol), 프로토콜 데이터 단위(PDU, Protocol Data Unit)"
excerpt: "프로토콜과 PDU에 대해 알아보자."

categories: "network"
tags:
    - network
    - Protocol
    - PDU
toc: true  
toc_sticky: true
toc_label: "Contents In Page"
author_profile: true
use_math: true

date: 2024-04-26
---

## 프로토콜 (Protocol)

- **프로토콜**은 서로 다른 시스템이나 기기들 간의 데이터 교환을 원활히 하기 위한 표준화된 통신규약이다. 즉 **컴퓨터와 컴퓨터가 서로 이해 할 수 있는 언어이자 통신규약 및 약속**이다. 통신을 위해 프로토콜이 가져야 하는 일반적인 기능에는 데이터 처리 기능, 제어기능, 관리적 기능이 있다.
- 프로토콜 기본 3요소
  - **구문(Syntax)**: 데이터 형식, 코딩, 신호 레벨 등의 규정
  - **의미(Semantic)**: 정보 전송을 위한 제어 정보로 조정과 에러처리를 위한 규정
  - **타이밍(Timing)**: 시스템 간 정보 전송을 위한 속도 조절과 순서 관리 규정
- 프로토콜의 종류(역할)
  - 단편화
      - 송신 측에서는 긴 데이터 블록을 손쉽게 전송할 수 잇도록 크기가 똑같은 작은 블록으로 나누어 전송
  - 재합성
      - 수신 측에서 쪼개진 작은 데이터 블록을 재합성하여 원래의 페이지로 복원하는 기능
  - 캡슐화
      - 각 프로토콜에 적합한 데이터 블록을 만들려고 데이터에 정보를 추가하는 것
      - 플래그, 주소, 제어 정보, 오류 검출 부호 등을 부착하는 기능
  - 연결제어
      - 비연결 데이터 전송과 연결 위주 데이터 전송을 위한 통신로를 개설 유지 종결하는 기능
  - 흐름제어
      - 데이터양이나 통신속도 등이 수신 측의 처리 능력을 초과하지 않도록 조정하는 기능
  - 오류제어
      - 데이터 전송 중 발생할 수 있는 오류나 착오 등을 검출하고 정정하는 기능
  - 순서 결정
      - 연결 위주의 데이터를 전송할 때 송신 측이 보내는 데이터 단위 순서대로 수신측에 전달하는 기능
  - 주소 설정
      - 발생지 목적지 등의 주소를 명기하여 데이터를 정확하게 전달하는 기능
  - 동기화
      - 두 통신 객체의 상태를 일치시키는 기능
  - 다중화
      - 하나의 통신로를 여러개로 나누거나 회선 여러개를 하나의 통신로로 변환시켜 다수의 가입자가 동시에 사용할 수 있도록 하는 기능
  - 전송 서비스
      - 통신 객체를 사용하기 쉽도록 별도로 추가 서비스를 제공하는 기능

## 프로토콜 데이터 단위 (PDU, Protocol Data Unit)

- PDU 는 **데이터 통신에서 상위 계층이 전달한 데이터에 붙이는 제어정보**를 뜻한다.
- **모든 계층에서 데이터 자체는 동일하지만, 각 레이어를 거치면서 헤더 정보가 추가되고 이름이 달라진다.**
    
![Untitled](/assets/images/Network/Untitled%2013.png){: .align-center}*OSI 7계층에 따른 PDU*
    
- 각 계층의 입장에서, 사용자(Application)는 **Data**, TCP 혹은 UDP(Transport) 는 **Segments**, IP(Network) 는 **Packets**, 데이터 링크(Data Link)는 **Frames**, 하드웨어(Physical)는 **Bits** 인 것.
- **Segments** (전송 계층, L4)
  - 상위 계층에서 `Data` 를 전달받은 전송계층에서는 아래의 정보들을 추가해 그룹화 한다. 이때부터 데이터는 데이터가 아니라, `Segment`라고 불리는 것이다.
    - 발신지 포트 : 발신하는 application의 포트
    - 목적지 포트 : 수신해야 할 application의 포트
    - 순서 번호 : 순차적 전송할 경우 순서를 붙이며, 순서가 어긋나면 목적지 프로토콜이 이를 바로 잡는다.
    - 오류검출코드 : 발신지와 목적지 프로토콜은 `Segment`를 연산하여 오류 검출 코드를 각각 만든다. 만약 발신지에서 전송한 Segment에 포함된 오류 검출 코드와 목적지에서 만든 오류 검출 코드가 다르다면 전송되는 과정에서 오류가 발생한 것이다. 이 경우, 수신측은 그 Segment를 폐기하고 복구 절차를 밟는다. 오류검출코드는 `체크섬`, `프레임 체크 시퀀스`라고도 부른다.
- **Packets** (네트워크 계층, L3)
  - 전송 계층으로 부터 전달받은 `Segment`는 아래의 네트워크 계층의 정보를 포함해 `Packet`이라고 불리게 된다.
    - 발신지 컴퓨터 주소(Destination IP) : 패킷의 발신자 주소
    - 목적지 컴퓨터 주소(Source IP) : 패킷의 수신자 주소
    - 서비스 요청 : 네트워크 접속 프로토콜은 우선 순위와 같은 서브 네트워크의 사용을 요청할 수 있다.
- 그 외 용어
  - **Datagram** : 데이터그램은 사용자의 순수한 `message`를 다르게 부르는 말이다.
  - IP Packet : IP packet에서의 packet은 이 사용자 datagram을 데이터링크 계층(2계층)의 MTU에 맞춰서 토막을 낸 상태이다. 즉 packet은 토막난 상태의 사용자 정보 스트림을 말한다.
    - **MTU**(Maximum Transmission Unit)
      - 데이터링크에서 **하나의 프레임 또는 패킷에 담아 운반 가능한 최대 크기**. 즉 TCP/IP 네트워크 등과 같은 패킷 또는 프레임 기반의 네트워크에서 전송될 수 있는 최대 크기의 패킷 또는 프레임을 말한다.
      - 상위 계층(네트워크, 전송, 세션, 표현, 응용)으로부터 전달된 데이터(헤더를 포함한 전체 사이즈)의 수용 가능한 최대 크기로 생각할 수 있다.
      - **따라서 상위 계층 프로토콜은 하위 계층인 데이터링크에서의 MTU 에 맞춰야 한다.** 그래서 IP 단편화 등을 시행할 수밖에 없다.
  - **SDU**(Service Data Unit) : PDU와 SDU는 다른 용어다. SDU는 **상향/하향 통신 레이어 간에 전달되는 실제 정보**를 말한다. PDU는 동일 레이어 내에서 데이터 단위를 부르는 이름이다.
    -  즉, **`PDU` = `PCI`**(프로토콜 통신 유닛의 줄인말로 쉽게 말하면 헤더 정보) **+ `SDU`** 라고 생각하면 된다.